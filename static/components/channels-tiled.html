{{ define "components/search-channels-tiled" }}
{{ with . }}
{{ range . }}
<div class="relative flex-grow p-4 overflow-hidden group md:basis-1/3 rounded-xl bg-base-300" id="channel-tile-{{.ID}}">
  {{ if .Subscribed }}
  <div
    class="absolute inset-0 z-10 flex items-center justify-center w-full text-lg font-bold uppercase bg-black bg-opacity-50 cursor-default">
    Subscribed
  </div>
  {{ else }}
  <button type="button" _="on htmx:afterRequest remove #channel-tile-{{.ID}}"
    class="absolute inset-0 z-10 flex items-center justify-center invisible w-full text-lg font-bold uppercase bg-black bg-opacity-50 group-hover:visible group-[.htmx-request]:visible"
    hx-indicator="#channel-tile-{{.ID}}" hx-target="#subscriptions-list" hx-swap="afterbegin"
    hx-post="/api/channels/{{.ID}}/subscribe">
    <span class="loading loading-spinner invisible group-[.htmx-request]:visible"></span>
    <span class="group-[.htmx-request]:hidden">
      Subscribe
    </span>
  </button>
  {{ end }}
  {{ template "components/channel-tile" . }}
</div>
{{ end }}
{{ end }}
{{ end }}

{{ define "components/subs-channels-tile" }}
<div class="relative flex-grow p-4 overflow-hidden group md:basis-1/3 rounded-xl bg-base-300"
  id="sub-channel-tile-{{.ID}}">
  <button type="button"
    class="absolute inset-0 z-10 flex items-center justify-center invisible w-full text-lg font-bold uppercase bg-black bg-opacity-50 group-hover:visible"
    hx-target="#sub-channel-tile-{{.ID}}" hx-swap="delete" hx-post="/api/channels/{{.ID}}/unsubscribe"
    _="on htmx:afterRequest send clear to #search-box">
    unsubscribe
  </button>
  {{ template "components/channel-tile" . }}
</div>
{{ end }}

{{ define "components/subs-channels-tiled" }}
{{ with . }}
{{ range . }}
{{ template "components/subs-channels-tile" . }}
{{ end }}
{{ end }}
{{ end }}