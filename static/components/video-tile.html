{{ define "components/video-tile" }}

<div class="relative overflow-hidden shadow-md carousel-item rounded-xl overscroll-contain" id="video-tile-{{.ID}}">
  {{ if eq .Progress 0 }}
  <button class="absolute z-10 btn btn-dark btn-square md:btn-sm top-2 right-2"
    hx-post="/api/videos/{{ .ID }}/progress?progress=1" hx-swap="outerHTML" hx-target="#video-tile-{{.ID}}"
    hx-indicator="#video-tile-{{.ID}}-indicator">
    {{ template "icons/check" }}
  </button>
  {{ else }}
  <button class="absolute z-20 btn btn-dark btn-square md:btn-sm top-2 right-2"
    hx-post="/api/videos/{{ .ID }}/progress?progress=0" hx-swap="outerHTML" hx-target="#video-tile-{{.ID}}"
    hx-indicator="#video-tile-{{.ID}}-indicator">
    {{ template "icons/reload" }}
  </button>
  {{ end }}
  <a href="/app/watch/{{ .ID }}" class="relative group">
    <div class="absolute z-20 top-2 left-2 htmx-indicator" id="video-tile-{{.ID}}-indicator">
      <span class="loading loading-spinner loading-lg md:loading-sm"></span>
    </div>
    {{ if gt .Progress 0 }}
    <div
      class="absolute top-0 left-0 z-10 flex items-center justify-center w-full h-full text-4xl font-bold uppercase bg-black opacity-70 md:text-6xl">
      Watched
    </div>
    {{ end }}
    <img class="object-cover transition-all duration-500 cursor-pointer aspect-video h-44 md:h-60 group-hover:scale-110"
      src="{{ .Thumbnail }}" alt="{{ .Title }}">
    <div
      class="absolute bottom-0 left-0 hidden w-full p-1 font-bold text-center text-white truncate bg-black group-hover:inline-block animate__faster bg-opacity-60 animate__animated animate__slideInUp">
      {{ .Title }}
    </div>
  </a>
</div>

{{ end }}